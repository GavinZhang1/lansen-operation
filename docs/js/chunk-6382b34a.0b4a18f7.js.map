{"version":3,"sources":["webpack:///./src/view/single-page/message/index.vue?3404","webpack:///src/view/single-page/message/index.vue","webpack:///./src/view/single-page/message/index.vue?a7db","webpack:///./src/view/single-page/message/index.vue","webpack:///./src/view/single-page/message/index.vue?565e"],"names":["render","_vm","this","_h","$createElement","_c","_self","attrs","shadow","staticClass","width","active-name","on","on-select","handleSelect","name","_v","staticStyle","margin-left","count","messageUnreadCount","class-name","messageReadedCount","messageTrashCount","fix","size","_e","class","titleClass","handleView","_l","item","key","msg_id","_s","title","status","text","create_time","directives","rawName","value","currentMessageType","expression","float","margin-right","style","display","loading","icon","type","nativeOn","click","$event","stopPropagation","removeMsg","showingMsgItem","domProps","innerHTML","messageContent","staticRenderFns","listDic","unread","readed","trash","messagevue_type_script_lang_js_","data","listLoading","contentLoading","computed","Object","objectSpread","vuex_esm","messageUnreadList","state","user","messageReadedList","messageTrashList","messageList","not-unread-list","methods","stopLoading","_this","getContentByMsgId","then","content","find","hasRead","catch","removeReaded","restoreTrash","mounted","_this2","getMessageList","single_page_messagevue_type_script_lang_js_","component","componentNormalizer","__webpack_exports__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_10_oneOf_1_0_node_modules_css_loader_index_js_ref_10_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_10_oneOf_1_2_node_modules_less_loader_dist_cjs_js_ref_10_oneOf_1_3_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_index_vue_vue_type_style_index_0_lang_less___WEBPACK_IMPORTED_MODULE_0__","__webpack_require__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_10_oneOf_1_0_node_modules_css_loader_index_js_ref_10_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_10_oneOf_1_2_node_modules_less_loader_dist_cjs_js_ref_10_oneOf_1_3_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_index_vue_vue_type_style_index_0_lang_less___WEBPACK_IMPORTED_MODULE_0___default","n"],"mappings":"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","file":"js/chunk-6382b34a.0b4a18f7.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('Card',{attrs:{\"shadow\":\"\"}},[_c('div',[_c('div',{staticClass:\"message-page-con message-category-con\"},[_c('Menu',{attrs:{\"width\":\"auto\",\"active-name\":\"unread\"},on:{\"on-select\":_vm.handleSelect}},[_c('MenuItem',{attrs:{\"name\":\"unread\"}},[_c('span',{staticClass:\"category-title\"},[_vm._v(\"未读消息\")]),_c('Badge',{staticStyle:{\"margin-left\":\"10px\"},attrs:{\"count\":_vm.messageUnreadCount}})],1),_c('MenuItem',{attrs:{\"name\":\"readed\"}},[_c('span',{staticClass:\"category-title\"},[_vm._v(\"已读消息\")]),_c('Badge',{staticStyle:{\"margin-left\":\"10px\"},attrs:{\"class-name\":\"gray-dadge\",\"count\":_vm.messageReadedCount}})],1),_c('MenuItem',{attrs:{\"name\":\"trash\"}},[_c('span',{staticClass:\"category-title\"},[_vm._v(\"回收站\")]),_c('Badge',{staticStyle:{\"margin-left\":\"10px\"},attrs:{\"class-name\":\"gray-dadge\",\"count\":_vm.messageTrashCount}})],1)],1)],1),_c('div',{staticClass:\"message-page-con message-list-con\"},[(_vm.listLoading)?_c('Spin',{attrs:{\"fix\":\"\",\"size\":\"large\"}}):_vm._e(),_c('Menu',{class:_vm.titleClass,attrs:{\"width\":\"auto\",\"active-name\":\"\"},on:{\"on-select\":_vm.handleView}},_vm._l((_vm.messageList),function(item){return _c('MenuItem',{key:(\"msg_\" + (item.msg_id)),attrs:{\"name\":item.msg_id}},[_c('div',[_c('p',{staticClass:\"msg-title\"},[_vm._v(_vm._s(item.title))]),_c('Badge',{attrs:{\"status\":\"default\",\"text\":item.create_time}}),_c('Button',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.currentMessageType !== 'unread'),expression:\"currentMessageType !== 'unread'\"}],staticStyle:{\"float\":\"right\",\"margin-right\":\"20px\"},style:({ display: item.loading ? 'inline-block !important' : '' }),attrs:{\"loading\":item.loading,\"size\":\"small\",\"icon\":_vm.currentMessageType === 'readed' ? 'md-trash' : 'md-redo',\"title\":_vm.currentMessageType === 'readed' ? '删除' : '还原',\"type\":\"text\"},nativeOn:{\"click\":function($event){$event.stopPropagation();return _vm.removeMsg(item)}}})],1)])}),1)],1),_c('div',{staticClass:\"message-page-con message-view-con\"},[(_vm.contentLoading)?_c('Spin',{attrs:{\"fix\":\"\",\"size\":\"large\"}}):_vm._e(),_c('div',{staticClass:\"message-view-header\"},[_c('h2',{staticClass:\"message-view-title\"},[_vm._v(_vm._s(_vm.showingMsgItem.title))]),_c('time',{staticClass:\"message-view-time\"},[_vm._v(_vm._s(_vm.showingMsgItem.create_time))])]),_c('div',{domProps:{\"innerHTML\":_vm._s(_vm.messageContent)}})],1)])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <Card shadow>\r\n    <div>\r\n      <div class=\"message-page-con message-category-con\">\r\n        <Menu width=\"auto\" active-name=\"unread\" @on-select=\"handleSelect\">\r\n          <MenuItem name=\"unread\">\r\n            <span class=\"category-title\">未读消息</span><Badge style=\"margin-left: 10px\" :count=\"messageUnreadCount\"></Badge>\r\n          </MenuItem>\r\n          <MenuItem name=\"readed\">\r\n            <span class=\"category-title\">已读消息</span><Badge style=\"margin-left: 10px\" class-name=\"gray-dadge\" :count=\"messageReadedCount\"></Badge>\r\n          </MenuItem>\r\n          <MenuItem name=\"trash\">\r\n            <span class=\"category-title\">回收站</span><Badge style=\"margin-left: 10px\" class-name=\"gray-dadge\" :count=\"messageTrashCount\"></Badge>\r\n          </MenuItem>\r\n        </Menu>\r\n      </div>\r\n      <div class=\"message-page-con message-list-con\">\r\n        <Spin fix v-if=\"listLoading\" size=\"large\"></Spin>\r\n        <Menu\r\n          width=\"auto\"\r\n          active-name=\"\"\r\n          :class=\"titleClass\"\r\n          @on-select=\"handleView\"\r\n        >\r\n          <MenuItem v-for=\"item in messageList\" :name=\"item.msg_id\" :key=\"`msg_${item.msg_id}`\">\r\n            <div>\r\n              <p class=\"msg-title\">{{ item.title }}</p>\r\n              <Badge status=\"default\" :text=\"item.create_time\" />\r\n              <Button\r\n                style=\"float: right;margin-right: 20px;\"\r\n                :style=\"{ display: item.loading ? 'inline-block !important' : '' }\"\r\n                :loading=\"item.loading\"\r\n                size=\"small\"\r\n                :icon=\"currentMessageType === 'readed' ? 'md-trash' : 'md-redo'\"\r\n                :title=\"currentMessageType === 'readed' ? '删除' : '还原'\"\r\n                type=\"text\"\r\n                v-show=\"currentMessageType !== 'unread'\"\r\n                @click.native.stop=\"removeMsg(item)\"></Button>\r\n            </div>\r\n          </MenuItem>\r\n        </Menu>\r\n      </div>\r\n      <div class=\"message-page-con message-view-con\">\r\n        <Spin fix v-if=\"contentLoading\" size=\"large\"></Spin>\r\n        <div class=\"message-view-header\">\r\n          <h2 class=\"message-view-title\">{{ showingMsgItem.title }}</h2>\r\n          <time class=\"message-view-time\">{{ showingMsgItem.create_time }}</time>\r\n        </div>\r\n        <div v-html=\"messageContent\"></div>\r\n      </div>\r\n    </div>\r\n  </Card>\r\n</template>\r\n\r\n<script>\r\nimport { mapState, mapGetters, mapMutations, mapActions } from 'vuex'\r\nconst listDic = {\r\n  unread: 'messageUnreadList',\r\n  readed: 'messageReadedList',\r\n  trash: 'messageTrashList'\r\n}\r\nexport default {\r\n  name: 'message_page',\r\n  data () {\r\n    return {\r\n      listLoading: true,\r\n      contentLoading: false,\r\n      currentMessageType: 'unread',\r\n      messageContent: '',\r\n      showingMsgItem: {}\r\n    }\r\n  },\r\n  computed: {\r\n    ...mapState({\r\n      messageUnreadList: state => state.user.messageUnreadList,\r\n      messageReadedList: state => state.user.messageReadedList,\r\n      messageTrashList: state => state.user.messageTrashList,\r\n      messageList () {\r\n        return this[listDic[this.currentMessageType]]\r\n      },\r\n      titleClass () {\r\n        return {\r\n          'not-unread-list': this.currentMessageType !== 'unread'\r\n        }\r\n      }\r\n    }),\r\n    ...mapGetters([\r\n      'messageUnreadCount',\r\n      'messageReadedCount',\r\n      'messageTrashCount'\r\n    ])\r\n  },\r\n  methods: {\r\n    ...mapMutations([\r\n      //\r\n    ]),\r\n    ...mapActions([\r\n      'getContentByMsgId',\r\n      'getMessageList',\r\n      'hasRead',\r\n      'removeReaded',\r\n      'restoreTrash'\r\n    ]),\r\n    stopLoading (name) {\r\n      this[name] = false\r\n    },\r\n    handleSelect (name) {\r\n      this.currentMessageType = name\r\n    },\r\n    handleView (msg_id) {\r\n      this.contentLoading = true\r\n      this.getContentByMsgId({ msg_id }).then(content => {\r\n        this.messageContent = content\r\n        const item = this.messageList.find(item => item.msg_id === msg_id)\r\n        if (item) this.showingMsgItem = item\r\n        if (this.currentMessageType === 'unread') this.hasRead({ msg_id })\r\n        this.stopLoading('contentLoading')\r\n      }).catch(() => {\r\n        this.stopLoading('contentLoading')\r\n      })\r\n    },\r\n    removeMsg (item) {\r\n      item.loading = true\r\n      const msg_id = item.msg_id\r\n      if (this.currentMessageType === 'readed') this.removeReaded({ msg_id })\r\n      else this.restoreTrash({ msg_id })\r\n    }\r\n  },\r\n  mounted () {\r\n    this.listLoading = true\r\n    // 请求获取消息列表\r\n    this.getMessageList().then(() => this.stopLoading('listLoading')).catch(() => this.stopLoading('listLoading'))\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"less\">\r\n.message-page{\r\n  &-con{\r\n    height: ~\"calc(100vh - 176px)\";\r\n    display: inline-block;\r\n    vertical-align: top;\r\n    position: relative;\r\n    &.message-category-con{\r\n      border-right: 1px solid #e6e6e6;\r\n      width: 200px;\r\n    }\r\n    &.message-list-con{\r\n      border-right: 1px solid #e6e6e6;\r\n      width: 230px;\r\n    }\r\n    &.message-view-con{\r\n      position: absolute;\r\n      left: 446px;\r\n      top: 16px;\r\n      right: 16px;\r\n      bottom: 16px;\r\n      overflow: auto;\r\n      padding: 12px 20px 0;\r\n      .message-view-header{\r\n        margin-bottom: 20px;\r\n        .message-view-title{\r\n          display: inline-block;\r\n        }\r\n        .message-view-time{\r\n          margin-left: 20px;\r\n        }\r\n      }\r\n    }\r\n    .category-title{\r\n      display: inline-block;\r\n      width: 65px;\r\n    }\r\n    .gray-dadge{\r\n      background: gainsboro;\r\n    }\r\n    .not-unread-list{\r\n      .msg-title{\r\n        color: rgb(170, 169, 169);\r\n      }\r\n      .ivu-menu-item{\r\n        .ivu-btn.ivu-btn-text.ivu-btn-small.ivu-btn-icon-only{\r\n          display: none;\r\n        }\r\n        &:hover{\r\n          .ivu-btn.ivu-btn-text.ivu-btn-small.ivu-btn-icon-only{\r\n            display: inline-block;\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n}\r\n</style>\r\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=99cc2ca4&\"\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\nimport style0 from \"./index.vue?vue&type=style&index=0&lang=less&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","import mod from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../../node_modules/css-loader/index.js??ref--10-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=style&index=0&lang=less&\"; export default mod; export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../../node_modules/css-loader/index.js??ref--10-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=style&index=0&lang=less&\""],"sourceRoot":""}